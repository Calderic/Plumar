---
const { title, description, language = 'zh-CN', pageType = 'default' } = Astro.props;
import { getPlumarConfig } from '../utils/config.js';

const config = getPlumarConfig();
---

<!DOCTYPE html>
<html lang={language}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />
    {config.author && <meta name="author" content={config.author} />}
    <style>
      /* 内置默认样式 */
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        line-height: 1.6;
        color: #333;
        background: #fff;
      }

      h1, h2, h3 {
        color: #2c3e50;
        margin-top: 2rem;
      }

      h1 {
        border-bottom: 2px solid #3498db;
        padding-bottom: 0.5rem;
      }

      a {
        color: #3498db;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .theme-notice {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }

      .theme-notice h3 {
        margin-top: 0;
        color: white;
      }

      .theme-notice code {
        background: rgba(255,255,255,0.2);
        padding: 0.3rem 0.6rem;
        border-radius: 5px;
        font-size: 0.9rem;
      }

      .fallback-header {
        text-align: center;
        padding: 2rem 0;
        border-bottom: 1px solid #eee;
        margin-bottom: 2rem;
      }

      .fallback-footer {
        text-align: center;
        padding: 2rem 0;
        border-top: 1px solid #eee;
        margin-top: 2rem;
        color: #666;
        font-size: 0.9rem;
      }

      .nav-links {
        margin: 1rem 0;
      }

      .nav-links a {
        margin: 0 1rem;
        padding: 0.5rem 1rem;
        background: #f8f9fa;
        border-radius: 5px;
        display: inline-block;
        margin-bottom: 0.5rem;
      }

      .nav-links a:hover {
        background: #e9ecef;
        text-decoration: none;
      }

      /* 针对不同页面类型的样式 */
      .page-type-home .theme-notice {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
      }

      .page-type-blog .theme-notice {
        background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
      }

      .page-type-post .theme-notice {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        color: #333;
      }

      /* 响应式设计 */
      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        .nav-links a {
          display: block;
          margin: 0.5rem 0;
        }
      }
    </style>
  </head>
  <body class={`page-type-${pageType}`}>
    <header class="fallback-header">
      <h1>{config.title}</h1>
      <p>{config.description}</p>
      <nav class="nav-links">
        <a href="/">首页</a>
        <a href="/blog">博客</a>
      </nav>
    </header>

    <div class="theme-notice">
      <h3>🎨 欢迎使用 Plumar</h3>
      <p>当前正在使用内置默认样式，您可以通过以下步骤自定义主题：</p>
      <div style="margin: 1rem 0;">
        <p>1️⃣ 创建主题: <code>plumar theme create my-theme</code></p>
        <p>2️⃣ 应用主题: <code>plumar theme set my-theme</code></p>
        <p>3️⃣ 重启服务器查看效果</p>
      </div>
      <p><small>或者查看 <a href="https://github.com/plumar/plumar" style="color: #ffd700;">文档</a> 了解更多主题制作方法</small></p>
    </div>

    <main>
      <slot />
    </main>

    <footer class="fallback-footer">
      <p>🚀 Powered by <strong>Plumar</strong> & <strong>Astro v{Astro.generator.split(' ')[1]}</strong></p>
      <p>当前主题: <strong>{config.theme || '内置默认样式'}</strong></p>
      <p><small>页面类型: {pageType} | 语言: {language}</small></p>
    </footer>
  </body>
</html> 