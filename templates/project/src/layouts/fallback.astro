---
const { title, description, language = 'zh-CN', pageType = 'default' } = Astro.props;
import { getPlumarConfig } from '../utils/config.js';

const config = getPlumarConfig();
---

<!DOCTYPE html>
<html lang={language}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />
    {config.author && <meta name="author" content={config.author} />}
    <style>
      /* å†…ç½®é»˜è®¤æ ·å¼ */
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        line-height: 1.6;
        color: #333;
        background: #fff;
      }

      h1, h2, h3 {
        color: #2c3e50;
        margin-top: 2rem;
      }

      h1 {
        border-bottom: 2px solid #3498db;
        padding-bottom: 0.5rem;
      }

      a {
        color: #3498db;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .theme-notice {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1.5rem;
        border-radius: 10px;
        margin: 2rem 0;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }

      .theme-notice h3 {
        margin-top: 0;
        color: white;
      }

      .theme-notice code {
        background: rgba(255,255,255,0.2);
        padding: 0.3rem 0.6rem;
        border-radius: 5px;
        font-size: 0.9rem;
      }

      .fallback-header {
        text-align: center;
        padding: 2rem 0;
        border-bottom: 1px solid #eee;
        margin-bottom: 2rem;
      }

      .fallback-footer {
        text-align: center;
        padding: 2rem 0;
        border-top: 1px solid #eee;
        margin-top: 2rem;
        color: #666;
        font-size: 0.9rem;
      }

      .nav-links {
        margin: 1rem 0;
      }

      .nav-links a {
        margin: 0 1rem;
        padding: 0.5rem 1rem;
        background: #f8f9fa;
        border-radius: 5px;
        display: inline-block;
        margin-bottom: 0.5rem;
      }

      .nav-links a:hover {
        background: #e9ecef;
        text-decoration: none;
      }

      /* é’ˆå¯¹ä¸åŒé¡µé¢ç±»å‹çš„æ ·å¼ */
      .page-type-home .theme-notice {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
      }

      .page-type-blog .theme-notice {
        background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
      }

      .page-type-post .theme-notice {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        color: #333;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        .nav-links a {
          display: block;
          margin: 0.5rem 0;
        }
      }
    </style>
  </head>
  <body class={`page-type-${pageType}`}>
    <header class="fallback-header">
      <h1>{config.title}</h1>
      <p>{config.description}</p>
      <nav class="nav-links">
        <a href="/">é¦–é¡µ</a>
        <a href="/blog">åšå®¢</a>
      </nav>
    </header>

    <div class="theme-notice">
      <h3>ğŸ¨ æ¬¢è¿ä½¿ç”¨ Plumar</h3>
      <p>å½“å‰æ­£åœ¨ä½¿ç”¨å†…ç½®é»˜è®¤æ ·å¼ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è‡ªå®šä¹‰ä¸»é¢˜ï¼š</p>
      <div style="margin: 1rem 0;">
        <p>1ï¸âƒ£ åˆ›å»ºä¸»é¢˜: <code>plumar theme create my-theme</code></p>
        <p>2ï¸âƒ£ åº”ç”¨ä¸»é¢˜: <code>plumar theme set my-theme</code></p>
        <p>3ï¸âƒ£ é‡å¯æœåŠ¡å™¨æŸ¥çœ‹æ•ˆæœ</p>
      </div>
      <p><small>æˆ–è€…æŸ¥çœ‹ <a href="https://github.com/plumar/plumar" style="color: #ffd700;">æ–‡æ¡£</a> äº†è§£æ›´å¤šä¸»é¢˜åˆ¶ä½œæ–¹æ³•</small></p>
    </div>

    <main>
      <slot />
    </main>

    <footer class="fallback-footer">
      <p>ğŸš€ Powered by <strong>Plumar</strong> & <strong>Astro v{Astro.generator.split(' ')[1]}</strong></p>
      <p>å½“å‰ä¸»é¢˜: <strong>{config.theme || 'å†…ç½®é»˜è®¤æ ·å¼'}</strong></p>
      <p><small>é¡µé¢ç±»å‹: {pageType} | è¯­è¨€: {language}</small></p>
    </footer>
  </body>
</html> 